{"version":3,"sources":["../index.js"],"names":["trueValue","falseValue","zeroValue","emptyValue","nullValue","undefinedValue","undefined","_","value","funcs","pipe","done","reduce","result","f","index","Function","indexOf","length","substr","Array","not","fail","promise","then","Promise","resolve","nextPipe","slice","res","any","or","reduceRight","obj","condition","if","else","all","and","check","when","cond","is","ex","catch","equalTo","notEqualTo","greaterThan","lessThan","Object","assign","invoke","func","args","placeholderIndex","leftPart","rightPart","always","true","false","zero","null","empty","left","right","conditions","unless","op","case","await","every","some","errorHandler"],"mappings":"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","file":"index.js","sourcesContent":["const trueValue = () => true;\r\nconst falseValue = () => false;\r\nconst zeroValue = () => 0;\r\nconst emptyValue = () => \"\";\r\nconst nullValue = () => null;\r\nconst undefinedValue = () => undefined;\r\nconst _ = (value, ...funcs) => pipe(...funcs)(value);\r\nconst pipe = (...funcs) => value => {\r\n  let done = false;\r\n\r\n  return funcs.reduce((result, f, index) => {\r\n    if (done) {\r\n      return result;\r\n    }\r\n    if (f instanceof Function) return f(result);\r\n    if (typeof f === \"string\")\r\n      return f.indexOf(\"()\") === f.length - 2\r\n        ? result[f.substr(0, f.length - 2)]()\r\n        : result[f];\r\n    if (f instanceof Array) return _(result, ...f);\r\n    if (typeof f === \"number\") return result[f];\r\n    if (f === pipe.not) return !result;\r\n    if (f && typeof f === \"object\") {\r\n      // await logic\r\n      if (\"await\" in f) {\r\n        result = f[\"await\"](result);\r\n        const fail = \"fail\" in f ? pipe(f.fail) : undefined;\r\n        const promise =\r\n          result && result.then ? result : Promise.resolve(result);\r\n        done = true;\r\n\r\n        return promise.then(res => {\r\n          const nextPipe = funcs.slice(index + 1);\r\n          return _(res, ...nextPipe);\r\n        }, fail);\r\n      }\r\n\r\n      if (\"any\" in f || \"or\" in f) {\r\n        f = (f.any || f.or).reduceRight((obj, condition) => {\r\n          return obj\r\n            ? { if: condition, then: trueValue, else: obj }\r\n            : {\r\n                if: condition,\r\n                then: trueValue,\r\n                else: f.else || falseValue\r\n              };\r\n        }, null);\r\n      }\r\n\r\n      if (\"all\" in f || \"and\" in f) {\r\n        f = (f.all || f.and).reduceRight((obj, condition) => {\r\n          return obj\r\n            ? { if: condition, then: obj, else: falseValue }\r\n            : {\r\n                if: condition,\r\n                then: trueValue,\r\n                else: f.else || falseValue\r\n              };\r\n        }, null);\r\n      }\r\n\r\n      if (\"check\" in f) {\r\n        f = {\r\n          if: f.check[0],\r\n          then: f.check[1],\r\n          else: f.check[2]\r\n        };\r\n\r\n        if (!f.else) {\r\n          delete f.else;\r\n        }\r\n      }\r\n\r\n      if (\"when\" in f) {\r\n        f = f.when.reduceRight((obj, condition) => {\r\n          const cond =\r\n            condition instanceof Array\r\n              ? { is: condition[0], then: condition[1] }\r\n              : { if: condition.is, then: condition.then };\r\n\r\n          return obj\r\n            ? { ...cond, else: obj }\r\n            : { ...cond, else: f.else || falseValue };\r\n        }, null);\r\n      }\r\n\r\n      if (\"if\" in f) {\r\n        const condition = !f.if ? result : _(result, f.if);\r\n        if (condition) {\r\n          return f.then !== null && f.then !== undefined\r\n            ? _(result, f[\"then\"])\r\n            : result;\r\n        }\r\n        return f.else !== null && f.else !== undefined\r\n          ? _(result, f[\"else\"])\r\n          : undefined;\r\n      }\r\n\r\n      if (\"catch\" in f) {\r\n        done = true;\r\n        try {\r\n          const nextPipe = funcs.slice(index + 1);\r\n          return _(value, ...nextPipe);\r\n        } catch (ex) {\r\n          return _(ex, f.catch);\r\n        }\r\n      }\r\n\r\n      if (\"value\" in f) {\r\n        return f.value;\r\n      }\r\n\r\n      if (\"equalTo\" in f) {\r\n        return result === f.equalTo;\r\n      }\r\n\r\n      if (\"=\" in f) {\r\n        return result === f[\"=\"];\r\n      }\r\n\r\n      if (\"null\" in f) {\r\n        return result === null;\r\n      }\r\n\r\n      if (\"undefined\" in f) {\r\n        return result === undefined;\r\n      }\r\n\r\n      if (\"empty\" in f) {\r\n        return result === \"\";\r\n      }\r\n\r\n      if (\"nil\" in f) {\r\n        return result === null || result === undefined;\r\n      }\r\n\r\n      if (\"notEqualTo\" in f) {\r\n        return result !== f.notEqualTo;\r\n      }\r\n\r\n      if (\"!=\" in f) {\r\n        return result !== f[\"!=\"];\r\n      }\r\n\r\n      if (\"greaterThan\" in f) {\r\n        return result > f.greaterThan;\r\n      }\r\n\r\n      if (\">\" in f) {\r\n        return result > f[\">\"];\r\n      }\r\n\r\n      if (\"lessThan\" in f) {\r\n        return result < f.lessThan;\r\n      }\r\n\r\n      if (\"<\" in f) {\r\n        return result < f[\"<\"];\r\n      }\r\n\r\n      if (\"greaterOrEqualTo\" in f) {\r\n        return result >= f.lessThan;\r\n      }\r\n\r\n      if (\">=\" in f) {\r\n        return result >= f[\">=\"];\r\n      }\r\n\r\n      if (\"lessOrEqualTo\" in f) {\r\n        return result <= f.lessThan;\r\n      }\r\n\r\n      if (\"<=\" in f) {\r\n        return result <= f[\"<=\"];\r\n      }\r\n    }\r\n    return result;\r\n  }, value);\r\n};\r\n\r\nObject.assign(pipe, {\r\n  _,\r\n  invoke: (func, ...args) => {\r\n    const placeholderIndex = args.indexOf(pipe);\r\n    const leftPart =\r\n      placeholderIndex === -1 ? [] : args.slice(0, placeholderIndex);\r\n    const rightPart =\r\n      placeholderIndex === -1 ? args : args.slice(placeholderIndex + 1);\r\n    return value =>\r\n      func instanceof Function\r\n        ? func(...leftPart, value, ...rightPart)\r\n        : value[func](...args);\r\n  },\r\n  not: (condition) => {\r\n    if (!condition) return value => !value;\r\n    return value => !_(value, condition);\r\n  },\r\n  always: value => () => value,\r\n  true: trueValue,\r\n  false: falseValue,\r\n  zero: zeroValue,\r\n  null: nullValue,\r\n  empty: emptyValue,\r\n  undefined: undefinedValue,\r\n  if: (cond, left, right) => pipe({ if: cond, then: left, else: right }),\r\n  when: (conditions, unless) => pipe({ when: conditions, else: unless }),\r\n  is: (op, value) => pipe({ [op]: value }),\r\n  case: (is, then) => ({ is, then }),\r\n  await: (promise, fail) => ({ await: promise, fail }),\r\n  and: (...conditions) => pipe({ and: conditions }),\r\n  every: (...conditions) => pipe({ and: conditions }),\r\n  or: (...conditions) => pipe({ or: conditions }),\r\n  some: (...conditions) => pipe({ or: conditions }),\r\n  catch: errorHandler => ({ catch: errorHandler })\r\n});\r\n\r\nexport default pipe;\r\n"]}